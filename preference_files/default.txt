# ISPAQ PREFERENCE FILE

# User defined sets of metrics ------------------------------------------------
Metrics:

  pdf: pdf, psd_corrected
  noise: psd_corrected, pdf, pct_above_nhnm, pct_below_nlnm, dead_channel_lin, dead_channel_gsn

  basicStats: sample_min, sample_median, sample_mean, sample_max, sample_rms, sample_unique
  gaps: num_gaps, max_gap, num_overlaps, max_overlap, percent_availability
  stateOfHealth: calibration_signal, timing_correction, event_begin, event_end, event_in_progress, clock_locked, amplifier_saturation, digitizer_clipping, spikes, glitches, missing_padded_data, telemetry_sync_error, digital_filter_charging, suspect_time_tag, timing_quality

 
# Sets of SNCLs ---------------------------------------------------------------
SNCLs:
  
  PDF_test: AK.BAL.*.BH*
  ANMO: IU.ANMO.00.BH?
  II: II.*.*.BH*, II.*.*.HH*


# Data and Metadata source ----------------------------------------------------
Data_Access:

  dataselect_url: IRIS
  event_url: IRIS
  station_url: IRIS
 

# User defined preferences ----------------------------------------------------
Preferences:

  csv_dir: ./csv/		# directory to contain generated metrics .csv files
  psd_dir: ./PSDs/		# directory to find PSD csv files (will have subdirectories based on NET and STA)
  pdf_dir: ./PDFs/		# directory to contain PDF files (will have subdirectories based on NET and STA)
  sigfigs: 6			# significant figures used to output metric values


# PDF-specific preferences ----------------------------------------------------
PDF_Preferences:

  pdf_type: text, plot				# formats for the aggregated PDF: plot, text
  pdf_interval: daily, aggregated	# whether the pdfs should be calculated daily or over the entire span: daily, aggregated
  plot_include: legend, colorbar	# options to include: legend (for min/max/mode), colorbar, fixed_yaxis_limits



 
 
## INFORMATION ABOUT THE PREFERENCE FILE --------------------------------------

# Preferences fall into five categories:
#  * Metrics -- aliases for user defined combinations of metrics
#  * Station_SNCLs -- aliases for user defined combinations of SNCL patterns
#                     SNCL patterns are station names formatted as Network.Station.Location.Channel
#                     wildcards * and ? are allowed (*.*.*.*). SNCL pattern format can be modified 
#                     using the Preferences sncl_format. 
#					  NOTE: Quality codes will be ignored. 
#					  		For example, IU.ANMO.00.BHZ.M will be treated as IU.ANMO.00.BHZ
#  * Data_Access -- FDSN web services or local files
#  * Preferences -- additional user preferences
#  * PDF_Preferences -- preferences specific to PDF calculation
#
# This file is in a very simple format.  After each category heading, all lines containing a colon 
# will be interpreted as key:value and made available to ISPAQ.
#
# Text to the right of `#` are comments and are ignored by the parser

# Example invocations that use these default preferences:
#
#   run_ispaq.py -M basicStats -S basicStats --starttime 2010-04-20 --log-level DEBUG
#   run_ispaq.py -M crossCorrelation -S crossCorrelation --starttime 2011-01-01
#   run_ispaq.py -M gaps -S gaps --starttime 2013-01-05 --endtime 2013-01-08 --log-level INFO -A
#   run_ispaq.py -M pdf -S pdf --starttime 2013-06-01 --endtime 2013-07-01


# About the Data_Access Section:
# FDSN service providers may be specified by using one of the following names:
#
#   BGR, EMSC, ETH, GEONET, GFZ, INGV, IPGP, IRIS, ISC, KOERI,
#   LMU, NCEDC, NIEP, ODC, ORFEUS, RESIF, SCEDC, USGS, USP
#
#   FDSN service providers may also be specified as an http:// address:
#   example, http://service.iris.edu 
#
#   Specified FDSN service provider must be the same for dataselect_url and station_url
#   and you should not specify one as FDSN and the other as local
#
#   The FDSN event service must provide an option for text output.
#
# To use local data you must instead specify local paths:
# 
#  * dataselect_url: directory containing miniseed files
#  * event_url: path of QUAKEML file (can also be FDSN service provider)
#  * station_url:  path of StationXML file (can also be FDSN service provider)
#  * resp_dir: directory containing local response RESP files, if used.
#
# If resp_dir is left blank with no directory specified, ISPAQ defaults to the IRIS DMC evalresp web 
# service http://service.iris.edu/irisws/evalresp/1/
#
# NOTE: Directory names should not match FDSN provider names.



# On the PDF_Preferences section:
# This section is used only when the pdf metric is being calculated
# 	* pdf_type -- specifies the output format for the PDFs. These files will be written to the pdf_dir. There are two options:
#			- plot: png file
#			- text: a text file with a header with start/end information, followed by a list of freq,power,hits
#	* pdf_interval -- specifies the span of the PDF values calculated. There are two options
#			- daily: calculate the PDF values for each day of the time range
#			- aggregated: calculate a single PDF for the entire time range, starting and ending at the specified times
#	* plot_include -- Where to specify plot options
#			- legend: includes a legend for min/max/mode
#			- colorbar: includes the colorbar on the right side of the plot
#			- fixed_yaxis_limits: sets the y-axis limits as -25 to -225 db
#				* normally the y-axis limits are determined by the data, but no smaller than
#				  the range of the NHNM and NLNM. The size of an individual frequency-power
#				  cell remains the same between plots, so the power range (y-axis) will 
#				  determine the height of the plot. This means that the aspect ratios of 
#				  the plots are naturally going to vary, depending on the data. 
#
# NOTE: 
#		* The PSD csv files to be used are to be found in the psd_dir specified in the "Preferences" section
#		* The pdf plots will be placed in in the pdf_dir specified in the "Preferences" section
# 		* BOTH the pdf_dir and the psd_dir are excepted to have sub directories where the files are. If using
#		  ISPAQ to calculate the PSDs and PDFs, then this structure will be created automatically.
#		* The expected naming scheme:
#			pdf_dir/NETWORK/STATION/
#			psd_dir/NETWORK/STATION/
#		



# All possible metrics:
#
#	PSD and PDF:
#		pct_above_nhnm, pct_below_nlnm, dead_channel_exp, dead_channel_lin, dead_channel_gsn, 
#		psd_corrected, pdf
#	Basic Statistics:
#		sample_min, sample_median, sample_mean, sample_max, sample_rms, sample_unique 
#	Availability and Gaps:
#		num_gaps, max_gap, num_overlaps, max_overlap, percent_availability
#	Multi-trace correlations:
#		polarity_check, cross_talk, orientation_check, pressure_effects
#	State of Health flags:
#		calibration_signal, timing_correction, event_begin, event_end, event_in_progress,
#		clock_locked, amplifier_saturation, digitizer_clipping, spikes, glitches,
#		missing_padded_data, telemetry_sync_error, digital_filter_charging, 
#		suspect_time_tag, timing_quality
#	Miscellaneous others:
#		sample_snr, num_spikes, max_stalta, transfer_function

        